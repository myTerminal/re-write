"use strict";var fs=require("fs"),path=require("path"),mkdirp=require("mkdirp");module.exports=function(){var n={main:"<{([0])}>",files:"<{([1])}>",data:"<{([2])}>"},t=function(n){return("0"+n.toString(16)).slice(-2)},r=function(n){return parseInt(n,16)},e=function(n){var t=path.dirname(n[0]).split("/");return new Array(t).join(",").split(",").map(function(n,r){return t.slice(0,r+1).join("/")}).filter(function(t){return n.filter(function(n){return 0===n.indexOf(t)}).length===n.length}).reverse()[0]||"."},i=function(n){return n.map(function(n){return n.split("/").filter(function(n){return".."!==n}).join("/")})},u=function(n,t){return n.map(function(n){return path.relative(t,n)})},f=function(n,t){return n.map(function(n){return path.join(t,n)})},o=function(n){return new Array(n.length).join(",").split(",").map(function(r,e){return t(n[e])}).reduce(function(n,t){return n+t},"")},a=function(n){return Buffer.from(new Array(n.length/2).join(",").split(",").map(function(t,e){return r(n.substr(2*e,2))}))};return{doIt:function(t,r){var e=t.map(function(t){return t+n.data+o(fs.readFileSync(t))}).join(n.files);fs.writeFileSync(r,e)},undoIt:function(t,r){var o=fs.readFileSync(t).toString().split(n.files).map(function(t){var r=t.split(n.data);return{name:r[0],content:a(r[1])}}),c=o.map(function(n){return n.name}),p=e(c),s=i(c),l=u(s,p);f(l,r).forEach(function(n,t){mkdirp.sync(path.dirname(n)),fs.writeFileSync(n,o[t].content)})}}}();