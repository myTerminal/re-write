"use strict";var fs=require("fs"),path=require("path"),mkdirp=require("mkdirp");module.exports=function(){var n=function(n){var t=n[0].split("/");return new Array(t).join(",").split(",").map(function(n,r){return t.slice(0,r+1).join("/")}).filter(function(t){return n.filter(function(n){return 0===n.indexOf(t)}).length===n.length}).reverse()[0]||"."},t=function(n){return n.map(function(n){return n.split("/").filter(function(n){return".."!==n}).join("/")})},r=function(n,t){return n.map(function(n){return path.relative(t,n)})},e=function(n,t){return n.map(function(n){return path.join(t,n)})},i=function(n){return n},u=function(n){return n};return{doIt:function(n,t){var r=n.map(function(n){return n+"<{([0])}>"+fs.readFileSync(n).toString()}).join("<{([1])}>");fs.writeFileSync(t,i(r))},undoIt:function(i,o){var f=fs.readFileSync(i).toString(),c=u(f).split("<{([1])}>").map(function(n){var t=n.split("<{([0])}>");return{name:t[0],content:t[1]}}),a=c.map(function(n){return n.name}),p=n(a),l=t(a),s=r(l,p);e(s,o).forEach(function(n,t){mkdirp.sync(path.dirname(n)),fs.writeFileSync(n,c[t].content)})}}}();