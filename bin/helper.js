"use strict";var fs=require("fs"),path=require("path"),io=require("./interface"),reWrite=require("./re-write");module.exports=function(){var t=function t(r,e){var i=fs.readdirSync(r);return e=e||[],i.forEach(function(i){fs.statSync(path.join(r,i)).isDirectory()?e=t(path.join(r,i),e):e.push(path.join(r,i))}),e},r=function(r){return r.map(function(r){return fs.lstatSync(r).isDirectory()?t(r):[r]}).reduce(function(t,r){return t.concat(r)},[])};return{getInputAndOutputItems:function(t,e){var i,n,o=e.slice(0).pop(),s=fs.existsSync(o)&&fs.statSync(o).isDirectory();return e.length<4&&io.showError("ARG_COUNT_LESS"),t===reWrite.doIt?(i=r(e.slice(2,e.length-1)),n=s?path.join(o,"output-file.txt"):o):(e.length>4&&io.showError("ARG_COUNT_MORE"),fs.existsSync(e[2])&&fs.statSync(e[2]).isFile()&&s||io.showError("UNDO_ARGS"),i=e[2],n=o),[i,n]}}}();