"use strict";var fs=require("fs"),path=require("path"),io=require("./interface"),reWrite=require("./re-write"),defaultOutputFileName="output-file.txt",getFilesInDirectory=function r(e,t){var n=1<arguments.length&&void 0!==t?t:[];return fs.readdirSync(e).forEach(function(t){fs.statSync(path.join(e,t)).isDirectory()?n=r(path.join(e,t),n):n.push(path.join(e,t))}),n},inflateInput=function(t){return t.map(function(t){return fs.lstatSync(t).isDirectory()?getFilesInDirectory(t):[t]}).reduce(function(t,r){return t.concat(r)},[])},isDirectory=function(t){return fs.existsSync(t)&&fs.statSync(t).isDirectory()},isFile=function(t){return fs.existsSync(t)&&fs.statSync(t).isFile()},getInputAndOutputForTransform=function(t,r){return[inflateInput(t.slice(0,t.length-1)),isDirectory(r)?path.join(r,defaultOutputFileName):r]},getInputAndOutputForRecover=function(t,r){return 2<t.length&&io.showError("ARG_COUNT_MORE"),isFile(t[0])&&isDirectory(r)||io.showError("UNDO_ARGS"),t};module.exports.getInputAndOutputItems=function(t,r){var e=r.slice(0).pop();return r.length<2&&io.showError("ARG_COUNT_LESS"),t===reWrite.doIt?getInputAndOutputForTransform(r,e):getInputAndOutputForRecover(r,e)};